<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>제코베 스토어 관리자 페이지</title>
</head>
<body>
  <button type="button" id="상품불러오기">상품 불러오기</button>

  <br>
  <label for="one">상품이름</label>
  <input id="one" type="text">
  <br>
  <label for="two">제품가격</label>
  <input id="two" type="number">
  <br>
  <label for="three">출시날짜</label>
  <input id="three" type="date">
  <br>
  <label for="four">재고</label>
  <input id="four" type="number">
  <br>
  <button id="상품등록하기">상품등록하기</button>


  
  <script>
    btnLoad = document.querySelector('#상품불러오기')
    btnLoad.addEventListener('click',(e)=>{
      console.log('눌렀다.')
      fetch('http://localhost:3001/product',{
        method:'GET'
      })
      .then(response => response.json())
      .then(data=>{
        for(i of data){
          console.log(i)
          const container = document.createElement('section')
          const productName = document.createElement('h2')
          const price = document.createElement('p')

          productName.innerText = i.productName
          price.innerText = i.price

          container.appendChild(productName)
          container.appendChild(price)
          document.body.appendChild(container)


        }
      })
    })

    // create
    btnRegi = document.querySelector('#상품등록하기')
    btnRegi.addEventListener('click',(e)=>{
      let productInfo = {
        productName: document.querySelector('#one').value,
        price: document.querySelector('#two').value,
        
        stockCount: document.querySelector('#four').value,
        viewCount: 0,
        pubDate: document.querySelector('#three').value,
        modDate: document.querySelector('#three').value
      }
      fetch('http://localhost:3001/product',{
        method:'POST',
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify(productInfo)
      })
      .then(response => response.json())
      .then(data=>{
        for(i of data){
          console.log(i)
          const container = document.createElement('section')
          const productName = document.createElement('h2')
          const price = document.createElement('p')

          productName.innerText = i.productName
          price.innerText = i.price

          container.appendChild(productName)
          container.appendChild(price)
          document.body.appendChild(container)


        }
      })
    })
  </script>
</body>
</html>